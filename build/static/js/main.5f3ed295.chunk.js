(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t.n(c),o=t(14),r=t.n(o),u=t(3),i=t(4),s=t.n(i),l="http://localhost:3001/api/persons",d=function(){return s.a.get(l)},b=function(e){return s.a.post(l,e)},j=function(e,n){return s.a.put("".concat(l,"/").concat(e),n)},h=function(e){return s.a.delete("".concat(l,"/").concat(e))},m=(t(37),t(0)),f=function(e){return Object(m.jsxs)("form",{onSubmit:e.handleAddClick,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:e.name,onChange:e.onNameChange}),Object(m.jsx)("br",{}),"number: ",Object(m.jsx)("input",{value:e.number,onChange:e.onNumberChange})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){return Object(m.jsxs)("div",{children:[e.name," ",e.number," ",Object(m.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(e.name," ?"))&&e.handleDelete()},children:"delete"})]})},p=function(e){var n=0===e.searchName.length?e.persons:e.persons.filter((function(n){return n.name.toLowerCase().includes(e.searchName.toLowerCase())}));return Object(m.jsx)("div",{children:n.map((function(n){return Object(m.jsx)(O,{name:n.name,number:n.number,handleDelete:function(){return e.callDelete(n.id)}},n.id)}))})},x=function(e){return Object(m.jsxs)("div",{children:["filter shown with: ",Object(m.jsx)("input",{value:e.searchName,onChange:e.onSearchChange})]})},v=function(e){var n=e.message,t=e.classn;return null===n?null:Object(m.jsx)("div",{className:t,children:n})},g=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),r=Object(u.a)(o,2),i=r[0],s=r[1],l=Object(c.useState)(""),O=Object(u.a)(l,2),g=O[0],C=O[1],w=Object(c.useState)(""),N=Object(u.a)(w,2),k=N[0],S=N[1],D=Object(c.useState)(""),y=Object(u.a)(D,2),A=y[0],E=y[1],J=Object(c.useState)(""),L=Object(u.a)(J,2),T=L[0],B=L[1];Object(c.useEffect)((function(){d().then((function(e){a(e.data)}))}),[]);var I=function(e){return e.name===i},M=function(e){window.confirm("".concat(i," is already added to phonebook,replace the old number with a new one?"));var n={name:i,number:g};j(e.id,n).then((function(n){a(t.map((function(t){return t.id!==e.id?t:n.data}))),s(""),C("")}))};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(v,{message:A,classn:T}),Object(m.jsx)(x,{searchName:k,onSearchChange:function(e){S(e.target.value)}}),Object(m.jsx)("h2",{children:"add a new"}),Object(m.jsx)(f,{handleAddClick:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===i}))[0];return t.some(I)&&n.number!==g?(M(n),0):t.some(I)?(alert("".concat(i," is already added to phonebook")),1):(b({name:i,number:g}).then((function(e){console.log(e.data),a(t.concat(e.data)),s(""),C(""),E("Added ".concat(i)),B("success"),setTimeout((function(){E(null)}),5e3)})),2)},name:i,onNameChange:function(e){s(e.target.value)},number:g,onNumberChange:function(e){C(e.target.value)}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(p,{searchName:k,persons:t,callDelete:function(e){h(e).then((function(){console.log("person deleted"),d().then((function(e){a(e.data)})).catch((function(n){E("information of ".concat(e," has already been removed from server")),B("error"),setTimeout((function(){E(null)}),5e3),a(t.filter((function(n){return n.id!==e})))}))}))}})]})};r.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.5f3ed295.chunk.js.map