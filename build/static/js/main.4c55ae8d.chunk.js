(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t.n(c),o=t(14),r=t.n(o),u=t(3),s=t(4),i=t.n(s),l="/api/persons",d=function(){return i.a.get(l)},b=function(e){return i.a.post(l,e)},j=function(e,n){return i.a.put("".concat(l,"/").concat(e),n)},h=function(e){return i.a.delete("".concat(l,"/").concat(e))},m=(t(37),t(0)),f=function(e){return Object(m.jsxs)("form",{onSubmit:e.handleAddClick,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:e.name,onChange:e.onNameChange}),Object(m.jsx)("br",{}),"number: ",Object(m.jsx)("input",{value:e.number,onChange:e.onNumberChange})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){return Object(m.jsxs)("div",{children:[e.name," ",e.number," ",Object(m.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(e.name," ?"))&&e.handleDelete()},children:"delete"})]})},p=function(e){var n=0===e.searchName.length?e.persons:e.persons.filter((function(n){return n.name.toLowerCase().includes(e.searchName.toLowerCase())}));return Object(m.jsx)("div",{children:n.map((function(n){return Object(m.jsx)(O,{name:n.name,number:n.number,handleDelete:function(){return e.callDelete(n.id)}},n.id)}))})},v=function(e){return Object(m.jsxs)("div",{children:["filter shown with: ",Object(m.jsx)("input",{value:e.searchName,onChange:e.onSearchChange})]})},x=function(e){var n=e.message,t=e.classn;return null===n?null:Object(m.jsx)("div",{className:t,children:n})},g=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),r=Object(u.a)(o,2),s=r[0],i=r[1],l=Object(c.useState)(""),O=Object(u.a)(l,2),g=O[0],C=O[1],w=Object(c.useState)(""),N=Object(u.a)(w,2),k=N[0],S=N[1],D=Object(c.useState)(""),y=Object(u.a)(D,2),T=y[0],A=y[1],E=Object(c.useState)(""),J=Object(u.a)(E,2),L=J[0],B=J[1];Object(c.useEffect)((function(){d().then((function(e){a(e.data)}))}),[]);var I=function(e){return e.name===s},M=function(e){window.confirm("".concat(s," is already added to phonebook,replace the old number with a new one?"));var n={name:s,number:g};j(e.id,n).then((function(n){a(t.map((function(t){return t.id!==e.id?t:n.data}))),i(""),C("")})).catch((function(e){console.log(e.response.data);var n=e.response.data;A(n.error),B("error"),setTimeout((function(){A(null)}),5e3)}))};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(x,{message:T,classn:L}),Object(m.jsx)(v,{searchName:k,onSearchChange:function(e){S(e.target.value)}}),Object(m.jsx)("h2",{children:"add a new"}),Object(m.jsx)(f,{handleAddClick:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===s}))[0];return t.some(I)&&n.number!==g?(M(n),0):t.some(I)?(alert("".concat(s," is already added to phonebook")),1):(b({name:s,number:g}).then((function(e){console.log(e.data),a(t.concat(e.data)),i(""),C(""),A("Added ".concat(s)),B("success"),setTimeout((function(){A(null)}),5e3)})).catch((function(e){console.log(e.response.data);var n=e.response.data;A(n.error),B("error"),setTimeout((function(){A(null)}),5e3)})),2)},name:s,onNameChange:function(e){i(e.target.value)},number:g,onNumberChange:function(e){C(e.target.value)}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(p,{searchName:k,persons:t,callDelete:function(e){h(e).then((function(){console.log("person deleted"),d().then((function(e){a(e.data)})).catch((function(n){A("information of ".concat(e," has already been removed from server")),B("error"),setTimeout((function(){A(null)}),5e3),a(t.filter((function(n){return n.id!==e})))}))}))}})]})};r.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.4c55ae8d.chunk.js.map