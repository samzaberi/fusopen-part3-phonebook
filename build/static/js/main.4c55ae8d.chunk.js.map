{"version":3,"sources":["services/persons.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","delete","PersonForm","props","onSubmit","handleAddClick","value","name","onChange","onNameChange","number","onNumberChange","type","Person","onClick","window","confirm","handleDelete","Persons","personsToShow","searchName","length","persons","filter","person","toLowerCase","includes","map","callDelete","Filter","onSearchChange","Notification","message","classn","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setSearchName","setMessage","setClassn","useEffect","personsService","then","response","data","personExists","obj","updatePerson","updatedPerson","p","catch","error","console","log","err","setTimeout","event","target","preventDefault","some","alert","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4c55ae8d.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n    return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\n\r\nexport default {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    deletePerson: deletePerson\r\n}","const PersonForm = (props) => {\r\n\r\n    return (\r\n        <form onSubmit={props.handleAddClick}>\r\n            <div>\r\n                name: <input value={props.name} onChange={props.onNameChange} />\r\n                <br />\r\n            number: <input value={props.number} onChange={props.onNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","const Person = (props) => {\r\n    const onDeleteClick = () => {\r\n        if (window.confirm(`Delete ${props.name} ?`)) {\r\n            props.handleDelete()\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            {props.name} {props.number} <button onClick={onDeleteClick}>delete</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Person","import Person from \"./Person\"\r\n\r\nconst Persons = (props) => {\r\n    const personsToShow = props.searchName.length === 0\r\n        ? props.persons\r\n        : props.persons.filter(person => person.name.toLowerCase().includes(props.searchName.toLowerCase()))\r\n\r\n    return (\r\n        <div>\r\n            {personsToShow.map(person => {\r\n                return (\r\n                    <Person key={person.id} name={person.name}\r\n                        number={person.number}\r\n                        handleDelete={() => props.callDelete(person.id)}\r\n                    />\r\n\r\n                )\r\n            }\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","const Filter = (props) => {\r\n    return (\r\n        <div>\r\n            filter shown with: <input value={props.searchName} onChange={props.onSearchChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","const Notification = ({ message, classn }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={classn}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\nimport \"./App.css\"\nimport PersonForm from \"./components/PersonForm\"\nimport Persons from \"./components/Persons\"\nimport Filter from \"./components/Filter\"\nimport Notification from \"./components/Notification\"\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchName, setSearchName] = useState('')\n  const [message, setMessage] = useState('')\n  const [classn, setClassn] = useState('')\n\n  useEffect(() => {\n    personsService.getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  const personExists = (obj) => obj.name === newName\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const objArr = persons.filter(person => person.name === newName)\n    const obj = objArr[0]\n    if (persons.some(personExists) && obj.number !== newNumber) {\n      updatePerson(obj)\n      return 0\n    }\n\n    if (persons.some(personExists)) {\n      alert(`${newName} is already added to phonebook`)\n      return 1\n    }\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    personsService.create(personObject)\n      .then(response => {\n        console.log(response.data)\n        setPersons(persons.concat(response.data))\n        setNewName('')\n        setNewNumber('')\n        setMessage(`Added ${newName}`)\n        setClassn(\"success\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        const err = error.response.data\n        setMessage(err.error)\n        setClassn(\"error\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n    return 2\n\n  }\n\n  const updatePerson = (obj) => {\n    window.confirm(`${newName} is already added to phonebook,replace the old number with a new one?`)\n    const updatedPerson = {\n      name: newName,\n      number: newNumber\n    }\n    personsService.update(obj.id, updatedPerson)\n      .then(response => {\n        setPersons(persons.map(p => p.id !== obj.id ? p : response.data))\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        const err = error.response.data\n        setMessage(err.error)\n        setClassn(\"error\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n  }\n\n  const delPerson = (id) => {\n    personsService.deletePerson(id)\n      .then(() => {\n        console.log(\"person deleted\")\n        personsService.getAll()\n          .then(response => {\n            setPersons(response.data)\n          }).catch(error => {\n            setMessage(`information of ${id} has already been removed from server`)\n            setClassn(\"error\")\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setPersons(persons.filter(p => p.id !== id))\n          })\n      })\n  }\n\n\n  const handleNameChange = (event) => {\n    // console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    // console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchChange = (event) => {\n    setSearchName(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} classn={classn} />\n      <Filter searchName={searchName} onSearchChange={handleSearchChange} />\n\n      <h2>add a new</h2>\n      <PersonForm handleAddClick={addPerson}\n        name={newName}\n        onNameChange={handleNameChange}\n        number={newNumber}\n        onNumberChange={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <Persons searchName={searchName}\n        persons={persons}\n        callDelete={delPerson}\n      />\n\n    </div>\n  )\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}